var mpv_errMsgs={fieldRequired:{general:"This field is required.",address:"Please provide an address.",captcha:"Please complete the captcha.",date:"Please provide a date.",email:"Please provide an email address.",file:"Please include an attachment.",name:"Please provide a name.",password:"Please provide a password.",phone:"Please provide a phone number.",url:"Please provide a URL/URI.",user:"Please provide a user ID."},fieldFormat:{date:"Please provide a properly formatted date.",mail:"Please provide a properly formatted email address.",phone:"Please provide a properly formatted phone number.",url:"Please provide a properly formatted URL/URI.",general:"Please see the form directions for formatting information for this field."},formRequired:{general:"There are required fields that have not been completed.",address:"A required address is missing.",captcha:"Please complete the captcha.",date:"A required date is missing.",email:"A required email address is missing.",file:"A required attachment is missing.",name:"A required name is missing.",password:"Please provide a password.",phone:"A required phone number is missing.",url:"A required URL/URI is missing.",user:"Please provide a user ID."},formFormat:{date:"A date field is not properly formatted for submission.",email:"An email address field is not properly formatted for submission.",phone:"A phone number field is not properly formatted for submission.",url:"A URL/URI field is not properly formatted for submission.",general:"There is an improperly formatted field. Please see the form directions."}};$("#fld_submit_btn").click(function(e){event.preventDefault();var r=!0,a="",s="text",t=$("<span />",{class:"errorOnField"}),i=$("<li />"),m=$("<div />",{id:"submit_summary",class:"warning"});$("<h3 />",{id:"h3_submit_summary"}).text("This form appears to have errors and is not ready to submit:").appendTo(m),$("<ul />",{id:"ul_submit_summary"}).appendTo(m);var l="#"+$("form.primary")[0].id;"undefined"==typeof mpv_submitFlags&&(mpv_submitFlags=[""]);var d=!mpv_submitFlags.noErrorCheck,o=mpv_submitFlags.replyOnError?mpv_submitFlags.replyOnError:"";m.append(o);var p=mpv_submitFlags.replyOnSuccess?mpv_submitFlags.replyOnSuccess:"",n=!mpv_submitFlags.noSummary,u="suppress"!=mpv_submitFlags.inlinePos,f="before"==mpv_submitFlags.inlinePos;if($("input, textarea").removeClass("missingValue").removeClass("invalidValue"),$(".errorOnField").remove(),$("#feedbackOnForm").empty(),d&&($("input, textarea").filter(".required, [required]").each(function(){if(""==$(this).val()){switch($(this).addClass("missingValue"),r=!1,a=$(this).attr("id"),s=$(this).attr("data-ftype")?$(this).attr("data-ftype"):$(this).attr("type")){case"address":t.html(mpv_errMsgs.fieldRequired.address),i.html(mpv_errMsgs.formRequired.address);break;case"captcha":t.html(mpv_errMsgs.fieldRequired.captcha),i.html(mpv_errMsgs.formRequired.captcha);break;case"date":case"datetime-local":t.html(mpv_errMsgs.fieldRequired.date),i.html(mpv_errMsgs.formRequired.date);break;case"email":t.html(mpv_errMsgs.fieldRequired.email),i.html(mpv_errMsgs.formRequired.email);break;case"name":t.html(mpv_errMsgs.fieldRequired.name),i.html(mpv_errMsgs.formRequired.name);break;case"password":t.html(mpv_errMsgs.fieldRequired.password),i.html(mpv_errMsgs.formRequired.password);break;case"phone":case"tel":t.html(mpv_errMsgs.fieldRequired.phone),i.html(mpv_errMsgs.formRequired.phone);break;case"file":case"image":t.html(mpv_errMsgs.fieldRequired.file),i.html(mpv_errMsgs.formRequired.file);break;case"url":t.html(mpv_errMsgs.fieldRequired.url),i.html(mpv_errMsgs.formRequired.url);break;default:t.html(mpv_errMsgs.fieldRequired.general),i.html(mpv_errMsgs.formRequired.general)}u&&(f?$(this).before(t.clone()):$(this).after(t.clone())),n&&m.find("#ul_submit_summary").append(i.clone())}}),$("input").filter("[pattern]").each(function(){var e=$(this).val(),l=new RegExp($(this).attr("pattern"));if(-1==e.search(l)&&""!=e){switch($(this).addClass("invalidValue"),r=!1,a=$(this).attr("id"),s=$(this).attr("data-ftype")?$(this).attr("data-ftype"):$(this).attr("type")){case"date":case"datetime-local":t.html(mpv_errMsgs.fieldFormat.date),i.html(mpv_errMsgs.formFormat.date);break;case"email":t.html(mpv_errMsgs.fieldFormat.email),i.html(mpv_errMsgs.formFormat.email);break;case"phone":case"tel":t.html(mpv_errMsgs.fieldFormat.phone),i.html(mpv_errMsgs.formFormat.phone);break;case"url":t.html(mpv_errMsgs.fieldFormat.url),i.html(mpv_errMsgs.formFormat.url);break;default:t.html(mpv_errMsgs.fieldFormat.general),i.html(mpv_errMsgs.formFormat.general)}u&&(f?$(this).before(t.clone()):$(this).after(t.clone())),n&&m.find("#ul_submit_summary").append(i.clone())}}),r&&$("#fld_captcha").length&&($.trim($("#g-recaptcha-response").val())||(r=!1,t.html(mpv_errMsgs.fieldRequired.captcha),i.html(mpv_errMsgs.formRequired.captcha),u&&(f?$("#g-recaptcha-response").before(t.clone()):$("#g-recaptcha-response").after(t.clone())),n&&m.find("#ul_submit_summary").append(i.clone()))),!r&&n)){var h={};m.find("#ul_submit_summary li").each(function(){var e=$(this).text();h[e]?$(this).remove():h[e]=!0}),$("#feedbackOnForm").append(m)}if(r){var c=$(l).serializeArray();$("#fld_submit_btn").prop("value","Processing...");var v=$("#fld_postpath").val()?$("#fld_postpath").val():$(l).attr("action"),v="./post.php";$("#fld_postpath").val()&&(v=$("#fld_postpath").val());$.post(v,c).done(function(e){$("#fld_submit_btn").prop("value","Submit Form"),$("#fs_submitForm").get(0).scrollIntoView(),$("#feedbackOnForm").html(p),$("#feedbackOnForm").append(e),$(".allow-retry").length||($("#fld_captcha, #fld_submit_btn, .noprint").hide(),$("#fs_submitForm legend").text("You may print a copy of this for your records."))}).fail(function(){alert("There was an error with this request.")})}});